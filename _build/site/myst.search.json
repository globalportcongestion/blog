{"version":"1","records":[{"hierarchy":{"lvl1":"Port Congestion"},"type":"lvl1","url":"/congestion","position":0},{"hierarchy":{"lvl1":"Port Congestion"},"content":"import pandas as pd\nimport plotly.express as px\n\nmapbox_token = \"pk.eyJ1IjoiemhvbmdqdW5tYSIsImEiOiJja2pwbzA3c2YwNjd3MnJxaDFrcHh5NmNyIn0.6mzTX-clHuP5h9lUO17TCw\"\nBORDER_SIZE = 10\nDATA_DIR = './data'\n\nWe define two congestion indices:\n\nAverage Congestion Rate (ACR) --- A weighted average of the congestion rates for the top 50 container ports worldwide, with the weights determined by the number of ship visits to each port:ACR_t = \\sum_{p \\in \\mathcal{P}} \\left[ \\frac{Delayed_{pt} + Undelayed_{pt}}{\\sum_{p \\in \\mathcal{P}} \\left( Delayed_{pt} + Undelayed_{pt} \\right)} \\cdot Congestion_{pt} \\right],\n\nwhere the congestion rate for each port p \\in \\mathcal{P} is computed by dividing the number of delayed ship visits by the total number of ship visits:Congestion_{pt} \\equiv \\frac{Delayed_{pt}}{Delayed_{pt} + Undelayed_{pt}}, \\quad \\forall p \\in \\mathcal{P}.\n\nDelayed_{pt} and Undelayed_{pt} represent the number of delayed and undelayed ship visits at port p in month t, respectively. The full list of the top 50 container ports can be accessed using the following link: \n\nhttps://​www​.worldshipping​.org​/top​-50​-ports.\n\nAverage Congestion Time (ACT) --- The average number of hours a container ship waits in an anchorage area of a port before docking at a berth, weighted by the number of ship visits to the top 50 container ports worldwide:ACT_t = \\sum_{p \\in \\mathcal{P}} \\left[ \\frac{Delayed_{pt} + Undelayed_{pt}}{\\sum_{p \\in \\mathcal{P}} \\left( Delayed_{pt} + Undelayed_{pt} \\right)} \\cdot \\frac{DelayHours_{pt}}{Delayed_{pt} + Undelayed_{pt}} \\right],\n\nwhere DelayHours_{pt} represents the total number of hours that container ships spend in the anchorage areas of port p in month t.\n\nThe identification of berth and anchorage areas in each port is achieved through the application of the IMA-DBSCAN algorithm, i.e., the Iterative, Multi-Attribute, Density-Based Spatial Clustering of Applications with Noise. The details and pseudo-code can be found in \n\nBai et al. (2023) and \n\nBai et al. (2024).\n\nThe monthly series of the ACR and ACT indices can be downloaded using the following link: \n\nACR & ACT. Additionally, the disaggregated monthly series of congestion rates for the top 50 container ports (except for the Ports of Yingkou, Foshan, and Nantong in China) can be downloaded using the following link: \n\nCongestion Indices.\n\nThese three ports are excluded because their AIS trajectories did not overlap with the available berth polygons, or because their port names could not be reliably matched to corresponding berth polygons. All other ports in the global top 50 are included, ensuring comprehensive coverage of congestion conditions among the world’s major container ports.\n\n# df = pd.read_csv(f\"{DATA_DIR}/congestion_new_with_coords.csv\", sep=\"|\", header=0)\n# df = df.loc[df[\"year\"] >= 2017].copy()\n# df = df.round({\"total_congestion_time\": 1, \"act\": 2, \"aact\": 2, \"acr\": 4})\n# df = df.rename(columns={\"act\": \"ACT\", \"aact\": \"AACT\", \"acr\": \"ACR\"})\n# df[\"ACR\"] = df[\"ACR\"].apply(lambda x: format(x, \".2%\"))\n# df[\"Time\"] = df.apply(\n#     lambda x: pd.Timestamp(x[\"year\"], x[\"month\"], 1)\n#     .date()\n#     .strftime(\"%Y-%m\"),\n#     axis=1,\n# )\n# sizeref = 2. * df['ACT'].max() / (40 ** 2)\n# df['size'] = df[\"ACT\"]/sizeref\n\n# fig = px.scatter_geo(\n#     df,\n#     lat=\"latitude\",\n#     lon=\"longitude\",\n#     # text=congestion_df['act'].round(1).astype(int),\n#     size=\"size\",\n#     hover_name=\"port_name\",\n#     hover_data={\n#         \"ACR\": True,\n#         \"ACT\": True,\n#         \"AACT\": True,\n#         \"Time\": False,\n#         \"size\": False,\n#         \"latitude\": False,\n#         \"longitude\": False,\n#     },\n#     animation_frame=\"Time\",\n#     projection=\"natural earth\",\n#     # scope='asia',\n#     # width=800,\n#     # height=600,\n#     opacity=1,\n#     size_max=40,\n#     title=\"Congestion of top 50 container ports from 2017-01 to 2023-10\",\n# )\n# # fig.update_layout(\n# #     margin={\"l\": BORDER_SIZE, \"r\": BORDER_SIZE},\n# # )\n# fig.show()\n\n","type":"content","url":"/congestion","position":1},{"hierarchy":{"lvl1":"Port Congestion","lvl2":"References"},"type":"lvl2","url":"/congestion#references","position":2},{"hierarchy":{"lvl1":"Port Congestion","lvl2":"References"},"content":"","type":"content","url":"/congestion#references","position":3},{"hierarchy":{"lvl1":"Introduction"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"Introduction"},"content":"This website is used to present the latest progress of our research, and to share findings and related data. If you are interested in our research and are looking for collaboration, please get in touch.\n\nPort Congestion Analytics\n\nPort Congestion\n\nCongestion at the Panama Canal","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"Congestion at the Panama Canal"},"type":"lvl1","url":"/panama","position":0},{"hierarchy":{"lvl1":"Congestion at the Panama Canal"},"content":"import pandas as pd\nimport plotly.express as px\n\nmapbox_token = \"pk.eyJ1IjoiemhvbmdqdW5tYSIsImEiOiJja2pwbzA3c2YwNjd3MnJxaDFrcHh5NmNyIn0.6mzTX-clHuP5h9lUO17TCw\"\nBORDER_SIZE = 10\nDATA_DIR = './data'\n\nBeginning in October 2023, rainfall near the Panama Canal was 41% less than usual, marking it as the driest month since records began. This decrease in rainfall, a result of the El Niño phenomenon, has led to reduced water availability in the reservoir system. Consequently, the Panama Canal Authority has announced a reduction in the number of reservation slots, which is expected to decrease the canal’s capacity and cause congestion \n\nAuthority, 2023.\n\nWe have tracked the positions of vessels around the Panama Canal from early July 2023 to November 2023.\n\ndf = pd.read_csv(f'{DATA_DIR}/local/panama_daily.csv', sep='|', header=0)\n\ndef plot_points(df):\n    fig = px.scatter_map(\n        df,\n        lat=df[\"latitude\"],\n        lon=df[\"longitude\"],\n        # hover_data=['imo', 'timestamp', 'speed', 'heading'],\n        animation_frame=\"Date\",\n        zoom=6,\n        title=\"Vessel Positions at Panama Canal from 2023-07 to 2023-11\",\n        # width=800,\n        # height=600,\n    )\n    fig.update_layout(\n        map_style=\"satellite-streets\",\n        # margin={\"l\": 0, \"r\": 0, \"b\":0, \"t\": 0},\n        width=700,\n        height=800,\n    )\n    return fig\n\n\nfig = plot_points(df)\nfig\n\n","type":"content","url":"/panama","position":1},{"hierarchy":{"lvl1":"Congestion at the Panama Canal","lvl2":"References"},"type":"lvl2","url":"/panama#references","position":2},{"hierarchy":{"lvl1":"Congestion at the Panama Canal","lvl2":"References"},"content":"","type":"content","url":"/panama#references","position":3}]}